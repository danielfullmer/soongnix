{ cc_library_static }:
let

libLLVMSupport = cc_library_static {
    name = "libLLVMSupport";
    vendor_available = true;
    defaults = ["llvm-defaults-no-generated-headers"];
    target = {
        #  llvm-defaults turns off host builds by default, turn it back on for
        #  modules that are used to build llvm-tblgen
        host = {
            enabled = true;
        };
        windows = {
            enabled = true;
        };
    };
    srcs = [
        "ConvertUTF.c"
        "regcomp.c"
        "regerror.c"
        "regexec.c"
        "regfree.c"
        "regstrlcpy.c"
        "APFloat.cpp"
        "APInt.cpp"
        "APSInt.cpp"
        "ARMBuildAttrs.cpp"
        "ARMWinEH.cpp"
        "Allocator.cpp"
        "Atomic.cpp"
        "BlockFrequency.cpp"
        "BranchProbability.cpp"
        "COM.cpp"
        "CachePruning.cpp"
        "CommandLine.cpp"
        "Compression.cpp"
        "ConvertUTFWrapper.cpp"
        "CrashRecoveryContext.cpp"
        "DAGDeltaAlgorithm.cpp"
        "DataExtractor.cpp"
        "DataStream.cpp"
        "Debug.cpp"
        "DeltaAlgorithm.cpp"
        "Dwarf.cpp"
        "DynamicLibrary.cpp"
        "Errno.cpp"
        "Error.cpp"
        "ErrorHandling.cpp"
        "FileOutputBuffer.cpp"
        "FileUtilities.cpp"
        "FoldingSet.cpp"
        "FormattedStream.cpp"
        "GraphWriter.cpp"
        "Hashing.cpp"
        "Host.cpp"
        "IntEqClasses.cpp"
        "IntervalMap.cpp"
        "IntrusiveRefCntPtr.cpp"
        "JamCRC.cpp"
        "LEB128.cpp"
        "LineIterator.cpp"
        "Locale.cpp"
        "LockFileManager.cpp"
        "MD5.cpp"
        "ManagedStatic.cpp"
        "MathExtras.cpp"
        "Memory.cpp"
        "MemoryBuffer.cpp"
        "MemoryObject.cpp"
        "Mutex.cpp"
        "Options.cpp"
        "Path.cpp"
        "PluginLoader.cpp"
        "PrettyStackTrace.cpp"
        "Process.cpp"
        "Program.cpp"
        "RWMutex.cpp"
        "RandomNumberGenerator.cpp"
        "Regex.cpp"
        "SHA1.cpp"
        "ScaledNumber.cpp"
        "ScopedPrinter.cpp"
        "SearchForAddressOfSpecialSymbol.cpp"
        "Signals.cpp"
        "SmallPtrSet.cpp"
        "SmallVector.cpp"
        "SourceMgr.cpp"
        "SpecialCaseList.cpp"
        "Statistic.cpp"
        "StreamingMemoryObject.cpp"
        "StringExtras.cpp"
        "StringMap.cpp"
        "StringPool.cpp"
        "StringRef.cpp"
        "StringSaver.cpp"
        "SystemUtils.cpp"
        "TargetParser.cpp"
        "TargetRegistry.cpp"
        "ThreadLocal.cpp"
        "ThreadPool.cpp"
        "Threading.cpp"
        "TimeValue.cpp"
        "Timer.cpp"
        "ToolOutputFile.cpp"
        "Triple.cpp"
        "Twine.cpp"
        "Unicode.cpp"
        "Valgrind.cpp"
        "Watchdog.cpp"
        "YAMLParser.cpp"
        "YAMLTraits.cpp"
        "circular_raw_ostream.cpp"
        "raw_os_ostream.cpp"
        "raw_ostream.cpp"
    ];
};

in { inherit libLLVMSupport; }
