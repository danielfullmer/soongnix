{ filegroup, python_library }:
let

#  Copyright 2017 Google Inc. All rights reserved.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

py2-stdlib = python_library {
    name = "py2-stdlib";
    is_internal = true;
    pkg_path = "stdlib";
    srcs = [
        "BaseHTTPServer.py"
        "Bastion.py"
        "CGIHTTPServer.py"
        "ConfigParser.py"
        "Cookie.py"
        "DocXMLRPCServer.py"
        "HTMLParser.py"
        "MimeWriter.py"
        "Queue.py"
        "SimpleHTTPServer.py"
        "SimpleXMLRPCServer.py"
        "SocketServer.py"
        "StringIO.py"
        "UserDict.py"
        "UserList.py"
        "UserString.py"
        "_LWPCookieJar.py"
        "_MozillaCookieJar.py"
        "__future__.py"
        "__phello__.foo.py"
        "_abcoll.py"
        "_osx_support.py"
        "_pyio.py"
        "_strptime.py"
        "_threading_local.py"
        "_weakrefset.py"
        "abc.py"
        "aifc.py"
        "antigravity.py"
        "anydbm.py"
        "argparse.py"
        "ast.py"
        "asynchat.py"
        "asyncore.py"
        "atexit.py"
        "audiodev.py"
        "base64.py"
        "bdb.py"
        "binhex.py"
        "bisect.py"
        "cProfile.py"
        "calendar.py"
        "cgi.py"
        "cgitb.py"
        "chunk.py"
        "cmd.py"
        "code.py"
        "codecs.py"
        "codeop.py"
        "collections.py"
        "colorsys.py"
        "commands.py"
        "compileall.py"
        "contextlib.py"
        "cookielib.py"
        "copy.py"
        "copy_reg.py"
        "csv.py"
        "dbhash.py"
        "decimal.py"
        "difflib.py"
        "dircache.py"
        "dis.py"
        "doctest.py"
        "dumbdbm.py"
        "dummy_thread.py"
        "dummy_threading.py"
        "filecmp.py"
        "fileinput.py"
        "fnmatch.py"
        "formatter.py"
        "fpformat.py"
        "fractions.py"
        "ftplib.py"
        "functools.py"
        "genericpath.py"
        "getopt.py"
        "getpass.py"
        "gettext.py"
        "glob.py"
        "gzip.py"
        "hashlib.py"
        "heapq.py"
        "hmac.py"
        "htmlentitydefs.py"
        "htmllib.py"
        "httplib.py"
        "ihooks.py"
        "imaplib.py"
        "imghdr.py"
        "imputil.py"
        "inspect.py"
        "io.py"
        "keyword.py"
        "linecache.py"
        "locale.py"
        "macpath.py"
        "macurl2path.py"
        "mailbox.py"
        "mailcap.py"
        "markupbase.py"
        "md5.py"
        "mhlib.py"
        "mimetools.py"
        "mimetypes.py"
        "mimify.py"
        "modulefinder.py"
        "multifile.py"
        "mutex.py"
        "netrc.py"
        "new.py"
        "nntplib.py"
        "ntpath.py"
        "nturl2path.py"
        "numbers.py"
        "opcode.py"
        "optparse.py"
        "os.py"
        "os2emxpath.py"
        "pdb.py"
        "pickle.py"
        "pickletools.py"
        "pipes.py"
        "pkgutil.py"
        "platform.py"
        "plistlib.py"
        "popen2.py"
        "poplib.py"
        "posixfile.py"
        "posixpath.py"
        "pprint.py"
        "profile.py"
        "pstats.py"
        "pty.py"
        "py_compile.py"
        "pyclbr.py"
        "pydoc.py"
        "quopri.py"
        "random.py"
        "re.py"
        "repr.py"
        "rexec.py"
        "rfc822.py"
        "rlcompleter.py"
        "robotparser.py"
        "runpy.py"
        "sched.py"
        "sets.py"
        "sgmllib.py"
        "sha.py"
        "shelve.py"
        "shlex.py"
        "shutil.py"
        "site.py"
        "smtpd.py"
        "smtplib.py"
        "sndhdr.py"
        "socket.py"
        "sre.py"
        "sre_compile.py"
        "sre_constants.py"
        "sre_parse.py"
        "ssl.py"
        "stat.py"
        "statvfs.py"
        "string.py"
        "stringold.py"
        "stringprep.py"
        "struct.py"
        "subprocess.py"
        "sunau.py"
        "sunaudio.py"
        "symbol.py"
        "symtable.py"
        "sysconfig.py"
        "tabnanny.py"
        "tarfile.py"
        "telnetlib.py"
        "tempfile.py"
        "textwrap.py"
        "this.py"
        "threading.py"
        "timeit.py"
        "toaiff.py"
        "token.py"
        "tokenize.py"
        "trace.py"
        "traceback.py"
        "tty.py"
        "types.py"
        "urllib.py"
        "urllib2.py"
        "urlparse.py"
        "user.py"
        "uu.py"
        "uuid.py"
        "warnings.py"
        "wave.py"
        "weakref.py"
        "webbrowser.py"
        "whichdb.py"
        "xdrlib.py"
        "xmllib.py"
        "xmlrpclib.py"
        "zipfile.py"
        "compiler/__init__.py"
        "compiler/ast.py"
        "compiler/consts.py"
        "compiler/future.py"
        "compiler/misc.py"
        "compiler/pyassem.py"
        "compiler/pycodegen.py"
        "compiler/symbols.py"
        "compiler/syntax.py"
        "compiler/transformer.py"
        "compiler/visitor.py"
        "ctypes/__init__.py"
        "ctypes/_endian.py"
        "ctypes/util.py"
        "ctypes/wintypes.py"
        "ctypes/macholib/__init__.py"
        "ctypes/macholib/dyld.py"
        "ctypes/macholib/dylib.py"
        "ctypes/macholib/framework.py"
        "ctypes/test/__init__.py"
        "ctypes/test/runtests.py"
        "ctypes/test/test_anon.py"
        "ctypes/test/test_array_in_pointer.py"
        "ctypes/test/test_arrays.py"
        "ctypes/test/test_as_parameter.py"
        "ctypes/test/test_bitfields.py"
        "ctypes/test/test_buffers.py"
        "ctypes/test/test_byteswap.py"
        "ctypes/test/test_callbacks.py"
        "ctypes/test/test_cast.py"
        "ctypes/test/test_cfuncs.py"
        "ctypes/test/test_checkretval.py"
        "ctypes/test/test_delattr.py"
        "ctypes/test/test_errno.py"
        "ctypes/test/test_find.py"
        "ctypes/test/test_frombuffer.py"
        "ctypes/test/test_funcptr.py"
        "ctypes/test/test_functions.py"
        "ctypes/test/test_incomplete.py"
        "ctypes/test/test_init.py"
        "ctypes/test/test_internals.py"
        "ctypes/test/test_keeprefs.py"
        "ctypes/test/test_libc.py"
        "ctypes/test/test_loading.py"
        "ctypes/test/test_macholib.py"
        "ctypes/test/test_memfunctions.py"
        "ctypes/test/test_numbers.py"
        "ctypes/test/test_objects.py"
        "ctypes/test/test_parameters.py"
        "ctypes/test/test_pep3118.py"
        "ctypes/test/test_pickling.py"
        "ctypes/test/test_pointers.py"
        "ctypes/test/test_prototypes.py"
        "ctypes/test/test_python_api.py"
        "ctypes/test/test_random_things.py"
        "ctypes/test/test_refcounts.py"
        "ctypes/test/test_repr.py"
        "ctypes/test/test_returnfuncptrs.py"
        "ctypes/test/test_simplesubclasses.py"
        "ctypes/test/test_sizes.py"
        "ctypes/test/test_slicing.py"
        "ctypes/test/test_stringptr.py"
        "ctypes/test/test_strings.py"
        "ctypes/test/test_struct_fields.py"
        "ctypes/test/test_structures.py"
        "ctypes/test/test_unaligned_structures.py"
        "ctypes/test/test_unicode.py"
        "ctypes/test/test_values.py"
        "ctypes/test/test_varsize_struct.py"
        "ctypes/test/test_win32.py"
        "ctypes/test/test_wintypes.py"
        "distutils/__init__.py"
        "distutils/archive_util.py"
        "distutils/bcppcompiler.py"
        "distutils/ccompiler.py"
        "distutils/cmd.py"
        "distutils/config.py"
        "distutils/core.py"
        "distutils/cygwinccompiler.py"
        "distutils/debug.py"
        "distutils/dep_util.py"
        "distutils/dir_util.py"
        "distutils/dist.py"
        "distutils/emxccompiler.py"
        "distutils/errors.py"
        "distutils/extension.py"
        "distutils/fancy_getopt.py"
        "distutils/file_util.py"
        "distutils/filelist.py"
        "distutils/log.py"
        "distutils/msvc9compiler.py"
        "distutils/msvccompiler.py"
        "distutils/spawn.py"
        "distutils/sysconfig.py"
        "distutils/text_file.py"
        "distutils/unixccompiler.py"
        "distutils/util.py"
        "distutils/version.py"
        "distutils/versionpredicate.py"
        "distutils/command/__init__.py"
        "distutils/command/bdist.py"
        "distutils/command/bdist_dumb.py"
        "distutils/command/bdist_msi.py"
        "distutils/command/bdist_rpm.py"
        "distutils/command/bdist_wininst.py"
        "distutils/command/build.py"
        "distutils/command/build_clib.py"
        "distutils/command/build_ext.py"
        "distutils/command/build_py.py"
        "distutils/command/build_scripts.py"
        "distutils/command/check.py"
        "distutils/command/clean.py"
        "distutils/command/config.py"
        "distutils/command/install.py"
        "distutils/command/install_data.py"
        "distutils/command/install_egg_info.py"
        "distutils/command/install_headers.py"
        "distutils/command/install_lib.py"
        "distutils/command/install_scripts.py"
        "distutils/command/register.py"
        "distutils/command/sdist.py"
        "distutils/command/upload.py"
        "distutils/tests/__init__.py"
        "distutils/tests/setuptools_build_ext.py"
        "distutils/tests/setuptools_extension.py"
        "distutils/tests/support.py"
        "distutils/tests/test_archive_util.py"
        "distutils/tests/test_bdist.py"
        "distutils/tests/test_bdist_dumb.py"
        "distutils/tests/test_bdist_msi.py"
        "distutils/tests/test_bdist_rpm.py"
        "distutils/tests/test_bdist_wininst.py"
        "distutils/tests/test_build.py"
        "distutils/tests/test_build_clib.py"
        "distutils/tests/test_build_ext.py"
        "distutils/tests/test_build_py.py"
        "distutils/tests/test_build_scripts.py"
        "distutils/tests/test_ccompiler.py"
        "distutils/tests/test_check.py"
        "distutils/tests/test_clean.py"
        "distutils/tests/test_cmd.py"
        "distutils/tests/test_config.py"
        "distutils/tests/test_config_cmd.py"
        "distutils/tests/test_core.py"
        "distutils/tests/test_dep_util.py"
        "distutils/tests/test_dir_util.py"
        "distutils/tests/test_dist.py"
        "distutils/tests/test_file_util.py"
        "distutils/tests/test_filelist.py"
        "distutils/tests/test_install.py"
        "distutils/tests/test_install_data.py"
        "distutils/tests/test_install_headers.py"
        "distutils/tests/test_install_lib.py"
        "distutils/tests/test_install_scripts.py"
        "distutils/tests/test_msvc9compiler.py"
        "distutils/tests/test_register.py"
        "distutils/tests/test_sdist.py"
        "distutils/tests/test_spawn.py"
        "distutils/tests/test_sysconfig.py"
        "distutils/tests/test_text_file.py"
        "distutils/tests/test_unixccompiler.py"
        "distutils/tests/test_upload.py"
        "distutils/tests/test_util.py"
        "distutils/tests/test_version.py"
        "distutils/tests/test_versionpredicate.py"
        "email/__init__.py"
        "email/_parseaddr.py"
        "email/base64mime.py"
        "email/charset.py"
        "email/encoders.py"
        "email/errors.py"
        "email/feedparser.py"
        "email/generator.py"
        "email/header.py"
        "email/iterators.py"
        "email/message.py"
        "email/parser.py"
        "email/quoprimime.py"
        "email/utils.py"
        "email/mime/__init__.py"
        "email/mime/application.py"
        "email/mime/audio.py"
        "email/mime/base.py"
        "email/mime/image.py"
        "email/mime/message.py"
        "email/mime/multipart.py"
        "email/mime/nonmultipart.py"
        "email/mime/text.py"
        "email/test/__init__.py"
        "email/test/test_email.py"
        "email/test/test_email_codecs.py"
        "email/test/test_email_codecs_renamed.py"
        "email/test/test_email_renamed.py"
        "email/test/test_email_torture.py"
        "encodings/__init__.py"
        "encodings/aliases.py"
        "encodings/ascii.py"
        "encodings/base64_codec.py"
        "encodings/big5.py"
        "encodings/big5hkscs.py"
        "encodings/bz2_codec.py"
        "encodings/charmap.py"
        "encodings/cp037.py"
        "encodings/cp1006.py"
        "encodings/cp1026.py"
        "encodings/cp1140.py"
        "encodings/cp1250.py"
        "encodings/cp1251.py"
        "encodings/cp1252.py"
        "encodings/cp1253.py"
        "encodings/cp1254.py"
        "encodings/cp1255.py"
        "encodings/cp1256.py"
        "encodings/cp1257.py"
        "encodings/cp1258.py"
        "encodings/cp424.py"
        "encodings/cp437.py"
        "encodings/cp500.py"
        "encodings/cp720.py"
        "encodings/cp737.py"
        "encodings/cp775.py"
        "encodings/cp850.py"
        "encodings/cp852.py"
        "encodings/cp855.py"
        "encodings/cp856.py"
        "encodings/cp857.py"
        "encodings/cp858.py"
        "encodings/cp860.py"
        "encodings/cp861.py"
        "encodings/cp862.py"
        "encodings/cp863.py"
        "encodings/cp864.py"
        "encodings/cp865.py"
        "encodings/cp866.py"
        "encodings/cp869.py"
        "encodings/cp874.py"
        "encodings/cp875.py"
        "encodings/cp932.py"
        "encodings/cp949.py"
        "encodings/cp950.py"
        "encodings/euc_jis_2004.py"
        "encodings/euc_jisx0213.py"
        "encodings/euc_jp.py"
        "encodings/euc_kr.py"
        "encodings/gb18030.py"
        "encodings/gb2312.py"
        "encodings/gbk.py"
        "encodings/hex_codec.py"
        "encodings/hp_roman8.py"
        "encodings/hz.py"
        "encodings/idna.py"
        "encodings/iso2022_jp.py"
        "encodings/iso2022_jp_1.py"
        "encodings/iso2022_jp_2.py"
        "encodings/iso2022_jp_2004.py"
        "encodings/iso2022_jp_3.py"
        "encodings/iso2022_jp_ext.py"
        "encodings/iso2022_kr.py"
        "encodings/iso8859_1.py"
        "encodings/iso8859_10.py"
        "encodings/iso8859_11.py"
        "encodings/iso8859_13.py"
        "encodings/iso8859_14.py"
        "encodings/iso8859_15.py"
        "encodings/iso8859_16.py"
        "encodings/iso8859_2.py"
        "encodings/iso8859_3.py"
        "encodings/iso8859_4.py"
        "encodings/iso8859_5.py"
        "encodings/iso8859_6.py"
        "encodings/iso8859_7.py"
        "encodings/iso8859_8.py"
        "encodings/iso8859_9.py"
        "encodings/johab.py"
        "encodings/koi8_r.py"
        "encodings/koi8_u.py"
        "encodings/latin_1.py"
        "encodings/mac_arabic.py"
        "encodings/mac_centeuro.py"
        "encodings/mac_croatian.py"
        "encodings/mac_cyrillic.py"
        "encodings/mac_farsi.py"
        "encodings/mac_greek.py"
        "encodings/mac_iceland.py"
        "encodings/mac_latin2.py"
        "encodings/mac_roman.py"
        "encodings/mac_romanian.py"
        "encodings/mac_turkish.py"
        "encodings/mbcs.py"
        "encodings/palmos.py"
        "encodings/ptcp154.py"
        "encodings/punycode.py"
        "encodings/quopri_codec.py"
        "encodings/raw_unicode_escape.py"
        "encodings/rot_13.py"
        "encodings/shift_jis.py"
        "encodings/shift_jis_2004.py"
        "encodings/shift_jisx0213.py"
        "encodings/string_escape.py"
        "encodings/tis_620.py"
        "encodings/undefined.py"
        "encodings/unicode_escape.py"
        "encodings/unicode_internal.py"
        "encodings/utf_16.py"
        "encodings/utf_16_be.py"
        "encodings/utf_16_le.py"
        "encodings/utf_32.py"
        "encodings/utf_32_be.py"
        "encodings/utf_32_le.py"
        "encodings/utf_7.py"
        "encodings/utf_8.py"
        "encodings/utf_8_sig.py"
        "encodings/uu_codec.py"
        "encodings/zlib_codec.py"
        "hotshot/__init__.py"
        "hotshot/log.py"
        "hotshot/stats.py"
        "hotshot/stones.py"
        "importlib/__init__.py"
        "json/__init__.py"
        "json/decoder.py"
        "json/encoder.py"
        "json/scanner.py"
        "json/tool.py"
        "json/tests/__init__.py"
        "json/tests/test_check_circular.py"
        "json/tests/test_decode.py"
        "json/tests/test_default.py"
        "json/tests/test_dump.py"
        "json/tests/test_encode_basestring_ascii.py"
        "json/tests/test_fail.py"
        "json/tests/test_float.py"
        "json/tests/test_indent.py"
        "json/tests/test_pass1.py"
        "json/tests/test_pass2.py"
        "json/tests/test_pass3.py"
        "json/tests/test_recursion.py"
        "json/tests/test_scanstring.py"
        "json/tests/test_separators.py"
        "json/tests/test_speedups.py"
        "json/tests/test_tool.py"
        "json/tests/test_unicode.py"
        "logging/__init__.py"
        "logging/config.py"
        "logging/handlers.py"
        "multiprocessing/__init__.py"
        "multiprocessing/connection.py"
        "multiprocessing/forking.py"
        "multiprocessing/heap.py"
        "multiprocessing/managers.py"
        "multiprocessing/pool.py"
        "multiprocessing/process.py"
        "multiprocessing/queues.py"
        "multiprocessing/reduction.py"
        "multiprocessing/sharedctypes.py"
        "multiprocessing/synchronize.py"
        "multiprocessing/util.py"
        "multiprocessing/dummy/__init__.py"
        "multiprocessing/dummy/connection.py"
        "pydoc_data/__init__.py"
        "pydoc_data/topics.py"
        "sqlite3/__init__.py"
        "sqlite3/dbapi2.py"
        "sqlite3/dump.py"
        "sqlite3/test/__init__.py"
        "sqlite3/test/dbapi.py"
        "sqlite3/test/dump.py"
        "sqlite3/test/factory.py"
        "sqlite3/test/hooks.py"
        "sqlite3/test/py25tests.py"
        "sqlite3/test/regression.py"
        "sqlite3/test/transactions.py"
        "sqlite3/test/types.py"
        "sqlite3/test/userfunctions.py"
        "unittest/__init__.py"
        "unittest/__main__.py"
        "unittest/case.py"
        "unittest/loader.py"
        "unittest/main.py"
        "unittest/result.py"
        "unittest/runner.py"
        "unittest/signals.py"
        "unittest/suite.py"
        "unittest/util.py"
        "unittest/test/__init__.py"
        "unittest/test/dummy.py"
        "unittest/test/support.py"
        "unittest/test/test_assertions.py"
        "unittest/test/test_break.py"
        "unittest/test/test_case.py"
        "unittest/test/test_discovery.py"
        "unittest/test/test_functiontestcase.py"
        "unittest/test/test_loader.py"
        "unittest/test/test_program.py"
        "unittest/test/test_result.py"
        "unittest/test/test_runner.py"
        "unittest/test/test_setups.py"
        "unittest/test/test_skipping.py"
        "unittest/test/test_suite.py"
        "wsgiref/__init__.py"
        "wsgiref/handlers.py"
        "wsgiref/headers.py"
        "wsgiref/simple_server.py"
        "wsgiref/util.py"
        "wsgiref/validate.py"
        "xml/__init__.py"
        "xml/dom/NodeFilter.py"
        "xml/dom/__init__.py"
        "xml/dom/domreg.py"
        "xml/dom/expatbuilder.py"
        "xml/dom/minicompat.py"
        "xml/dom/minidom.py"
        "xml/dom/pulldom.py"
        "xml/dom/xmlbuilder.py"
        "xml/etree/ElementInclude.py"
        "xml/etree/ElementPath.py"
        "xml/etree/ElementTree.py"
        "xml/etree/__init__.py"
        "xml/etree/cElementTree.py"
        "xml/parsers/__init__.py"
        "xml/parsers/expat.py"
        "xml/sax/__init__.py"
        "xml/sax/_exceptions.py"
        "xml/sax/expatreader.py"
        "xml/sax/handler.py"
        "xml/sax/saxutils.py"
        "xml/sax/xmlreader.py"
    ];
    #  TODO(nanzhang): make exclude_srcs support globs.
    exclude_srcs = [
        "__phello__.foo.py"
    ];
    version = {
        py2 = {
            enabled = true;
        };
        py3 = {
            enabled = false;
        };
    };
    target = {
        darwin = {
            srcs = [":py2-plat-darwin"];
        };
        linux = {
            srcs = [":py2-plat-linux2"];
        };
    };
    host_supported = true;
};

py2-plat-darwin = filegroup {
    name = "py2-plat-darwin";
    srcs = ["plat-darwin/IN.py"];
    path = "plat-darwin";
};

py2-plat-linux2 = filegroup {
    name = "py2-plat-linux2";
    srcs = [
        "plat-linux2/CDROM.py"
        "plat-linux2/DLFCN.py"
        "plat-linux2/IN.py"
        "plat-linux2/TYPES.py"
    ];
    path = "plat-linux2";
};

in { inherit py2-plat-darwin py2-plat-linux2 py2-stdlib; }
