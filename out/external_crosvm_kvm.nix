{ rust_library_host_rlib, rust_test_host }:
let

#  This file is generated by cargo2android.py, added defaults.

kvm_tests = rust_test_host {
    name = "kvm_tests";
    defaults = ["crosvm_defaults"];
    crate_name = "kvm";
    srcs = [
        "tests/dirty_log.rs"
        "tests/read_only_memory.rs"
        "tests/real_run_adder.rs"
    ];
    relative_install_path = "kvm_tests";
    test_suites = ["general-tests"];
    auto_gen_config = true;
    rlibs = [
        "libkvm"
        "libkvm_sys"
        "liblibc"
        "libmsg_socket"
        "libsys_util"
    ];
};

kvm_tests_kvm = rust_test_host {
    name = "kvm_tests_kvm";
    defaults = ["crosvm_defaults"];
    crate_name = "kvm";
    srcs = ["src/lib.rs"];
    relative_install_path = "kvm_tests";
    test_suites = ["general-tests"];
    auto_gen_config = true;
    rlibs = [
        "libkvm_sys"
        "liblibc"
        "libmsg_socket"
        "libsys_util"
    ];
};

libkvm = rust_library_host_rlib {
    name = "libkvm";
    defaults = ["crosvm_defaults"];
    crate_name = "kvm";
    srcs = ["src/lib.rs"];
    rlibs = [
        "libkvm_sys"
        "liblibc"
        "libmsg_socket"
        "libsys_util"
    ];
};

in { inherit kvm_tests kvm_tests_kvm libkvm; }
