{ android_library, java_defaults }:
let

SettingsLib = android_library {

    name = "SettingsLib";

    static_libs = [
        "androidx.annotation_annotation"
        "androidx.legacy_legacy-support-v4"
        "androidx.recyclerview_recyclerview"
        "androidx.preference_preference"
        "androidx.appcompat_appcompat"
        "androidx.lifecycle_lifecycle-runtime"
        "androidx.mediarouter_mediarouter-nodeps"

        "SettingsLibHelpUtils"
        "SettingsLibRestrictedLockUtils"
        "SettingsLibActionBarShadow"
        "SettingsLibAppPreference"
        "SettingsLibSearchWidget"
        "SettingsLibSettingsSpinner"
        "SettingsLibLayoutPreference"
        "SettingsLibActionButtonsPreference"
        "SettingsLibEntityHeaderWidgets"
        "SettingsLibBarChartPreference"
        "SettingsLibProgressBar"
        "SettingsLibAdaptiveIcon"
    ];

    #  ANDROIDMK TRANSLATION ERROR: unsupported assignment to LOCAL_SHARED_JAVA_LIBRARIES
    #  LOCAL_SHARED_JAVA_LIBRARIES := androidx.lifecycle_lifecycle-common

    resource_dirs = ["res"];

    srcs = [
        "src/com/android/settingslib/AppItem.java"
        "src/com/android/settingslib/CustomDialogPreference.java"
        "src/com/android/settingslib/CustomDialogPreferenceCompat.java"
        "src/com/android/settingslib/CustomEditTextPreference.java"
        "src/com/android/settingslib/CustomEditTextPreferenceCompat.java"
        "src/com/android/settingslib/DeviceInfoUtils.java"
        "src/com/android/settingslib/NetworkPolicyEditor.java"
        "src/com/android/settingslib/RestrictedLockImageSpan.java"
        "src/com/android/settingslib/RestrictedLockUtilsInternal.java"
        "src/com/android/settingslib/RestrictedPreference.java"
        "src/com/android/settingslib/RestrictedPreferenceHelper.java"
        "src/com/android/settingslib/RestrictedSwitchPreference.java"
        "src/com/android/settingslib/SliceBroadcastRelay.java"
        "src/com/android/settingslib/TetherUtil.java"
        "src/com/android/settingslib/TronUtils.java"
        "src/com/android/settingslib/TwoTargetPreference.java"
        "src/com/android/settingslib/Utils.java"
        "src/com/android/settingslib/WirelessUtils.java"
        "src/com/android/settingslib/accessibility/AccessibilityButtonHelper.java"
        "src/com/android/settingslib/accessibility/AccessibilityUtils.java"
        "src/com/android/settingslib/accounts/AuthenticatorHelper.java"
        "src/com/android/settingslib/animation/AppearAnimationCreator.java"
        "src/com/android/settingslib/animation/AppearAnimationUtils.java"
        "src/com/android/settingslib/animation/DisappearAnimationUtils.java"
        "src/com/android/settingslib/applications/AppUtils.java"
        "src/com/android/settingslib/applications/ApplicationsState.java"
        "src/com/android/settingslib/applications/DefaultAppInfo.java"
        "src/com/android/settingslib/applications/InterestingConfigChanges.java"
        "src/com/android/settingslib/applications/PermissionsSummaryHelper.java"
        "src/com/android/settingslib/applications/ServiceListing.java"
        "src/com/android/settingslib/applications/StorageStatsSource.java"
        "src/com/android/settingslib/applications/instantapps/InstantAppDataProvider.java"
        "src/com/android/settingslib/bluetooth/A2dpProfile.java"
        "src/com/android/settingslib/bluetooth/A2dpSinkProfile.java"
        "src/com/android/settingslib/bluetooth/BluetoothCallback.java"
        "src/com/android/settingslib/bluetooth/BluetoothDeviceFilter.java"
        "src/com/android/settingslib/bluetooth/BluetoothDiscoverableTimeoutReceiver.java"
        "src/com/android/settingslib/bluetooth/BluetoothEventManager.java"
        "src/com/android/settingslib/bluetooth/BluetoothUtils.java"
        "src/com/android/settingslib/bluetooth/CachedBluetoothDevice.java"
        "src/com/android/settingslib/bluetooth/CachedBluetoothDeviceManager.java"
        "src/com/android/settingslib/bluetooth/HeadsetProfile.java"
        "src/com/android/settingslib/bluetooth/HearingAidDeviceManager.java"
        "src/com/android/settingslib/bluetooth/HearingAidProfile.java"
        "src/com/android/settingslib/bluetooth/HfpClientProfile.java"
        "src/com/android/settingslib/bluetooth/HidDeviceProfile.java"
        "src/com/android/settingslib/bluetooth/HidProfile.java"
        "src/com/android/settingslib/bluetooth/LocalBluetoothAdapter.java"
        "src/com/android/settingslib/bluetooth/LocalBluetoothManager.java"
        "src/com/android/settingslib/bluetooth/LocalBluetoothProfile.java"
        "src/com/android/settingslib/bluetooth/LocalBluetoothProfileManager.java"
        "src/com/android/settingslib/bluetooth/MapClientProfile.java"
        "src/com/android/settingslib/bluetooth/MapProfile.java"
        "src/com/android/settingslib/bluetooth/OppProfile.java"
        "src/com/android/settingslib/bluetooth/PanProfile.java"
        "src/com/android/settingslib/bluetooth/PbapClientProfile.java"
        "src/com/android/settingslib/bluetooth/PbapServerProfile.java"
        "src/com/android/settingslib/bluetooth/SapProfile.java"
        "src/com/android/settingslib/core/AbstractPreferenceController.java"
        "src/com/android/settingslib/core/ConfirmationDialogController.java"
        "src/com/android/settingslib/core/instrumentation/EventLogWriter.java"
        "src/com/android/settingslib/core/instrumentation/Instrumentable.java"
        "src/com/android/settingslib/core/instrumentation/LogWriter.java"
        "src/com/android/settingslib/core/instrumentation/MetricsFeatureProvider.java"
        "src/com/android/settingslib/core/instrumentation/SharedPreferencesLogger.java"
        "src/com/android/settingslib/core/instrumentation/VisibilityLoggerMixin.java"
        "src/com/android/settingslib/core/lifecycle/Lifecycle.java"
        "src/com/android/settingslib/core/lifecycle/LifecycleObserver.java"
        "src/com/android/settingslib/core/lifecycle/ObservableActivity.java"
        "src/com/android/settingslib/core/lifecycle/ObservableDialogFragment.java"
        "src/com/android/settingslib/core/lifecycle/ObservableFragment.java"
        "src/com/android/settingslib/core/lifecycle/ObservablePreferenceFragment.java"
        "src/com/android/settingslib/core/lifecycle/events/OnAttach.java"
        "src/com/android/settingslib/core/lifecycle/events/OnCreate.java"
        "src/com/android/settingslib/core/lifecycle/events/OnCreateOptionsMenu.java"
        "src/com/android/settingslib/core/lifecycle/events/OnDestroy.java"
        "src/com/android/settingslib/core/lifecycle/events/OnOptionsItemSelected.java"
        "src/com/android/settingslib/core/lifecycle/events/OnPause.java"
        "src/com/android/settingslib/core/lifecycle/events/OnPrepareOptionsMenu.java"
        "src/com/android/settingslib/core/lifecycle/events/OnResume.java"
        "src/com/android/settingslib/core/lifecycle/events/OnSaveInstanceState.java"
        "src/com/android/settingslib/core/lifecycle/events/OnStart.java"
        "src/com/android/settingslib/core/lifecycle/events/OnStop.java"
        "src/com/android/settingslib/core/lifecycle/events/SetPreferenceScreen.java"
        "src/com/android/settingslib/datetime/ZoneGetter.java"
        "src/com/android/settingslib/development/AbstractEnableAdbPreferenceController.java"
        "src/com/android/settingslib/development/AbstractLogdSizePreferenceController.java"
        "src/com/android/settingslib/development/AbstractLogpersistPreferenceController.java"
        "src/com/android/settingslib/development/DeveloperOptionsPreferenceController.java"
        "src/com/android/settingslib/development/DevelopmentSettingsEnabler.java"
        "src/com/android/settingslib/development/SystemPropPoker.java"
        "src/com/android/settingslib/deviceinfo/AbstractBluetoothAddressPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractConnectivityPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractImsStatusPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractIpAddressPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractSerialNumberPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractSimStatusImeiInfoPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractUptimePreferenceController.java"
        "src/com/android/settingslib/deviceinfo/AbstractWifiMacAddressPreferenceController.java"
        "src/com/android/settingslib/deviceinfo/PrivateStorageInfo.java"
        "src/com/android/settingslib/deviceinfo/StorageManagerVolumeProvider.java"
        "src/com/android/settingslib/deviceinfo/StorageMeasurement.java"
        "src/com/android/settingslib/deviceinfo/StorageVolumeProvider.java"
        "src/com/android/settingslib/display/BrightnessUtils.java"
        "src/com/android/settingslib/display/DisplayDensityUtils.java"
        "src/com/android/settingslib/drawable/CircleFramedDrawable.java"
        "src/com/android/settingslib/drawable/UserIconDrawable.java"
        "src/com/android/settingslib/drawer/CategoryKey.java"
        "src/com/android/settingslib/dream/DreamBackend.java"
        "src/com/android/settingslib/fuelgauge/BatterySaverUtils.java"
        "src/com/android/settingslib/fuelgauge/PowerWhitelistBackend.java"
        "src/com/android/settingslib/graph/BatteryMeterDrawableBase.java"
        "src/com/android/settingslib/graph/BluetoothDeviceLayerDrawable.java"
        "src/com/android/settingslib/graph/SignalDrawable.java"
        "src/com/android/settingslib/inputmethod/InputMethodAndSubtypeEnablerManager.java"
        "src/com/android/settingslib/inputmethod/InputMethodAndSubtypeEnablerManagerCompat.java"
        "src/com/android/settingslib/inputmethod/InputMethodAndSubtypeUtil.java"
        "src/com/android/settingslib/inputmethod/InputMethodAndSubtypeUtilCompat.java"
        "src/com/android/settingslib/inputmethod/InputMethodPreference.java"
        "src/com/android/settingslib/inputmethod/InputMethodSettingValuesWrapper.java"
        "src/com/android/settingslib/inputmethod/InputMethodSubtypePreference.java"
        "src/com/android/settingslib/inputmethod/SwitchWithNoTextPreference.java"
        "src/com/android/settingslib/license/LicenseHtmlGeneratorFromXml.java"
        "src/com/android/settingslib/license/LicenseHtmlLoader.java"
        "src/com/android/settingslib/license/LicenseHtmlLoaderCompat.java"
        "src/com/android/settingslib/location/InjectedSetting.java"
        "src/com/android/settingslib/location/RecentLocationAccesses.java"
        "src/com/android/settingslib/location/RecentLocationApps.java"
        "src/com/android/settingslib/location/SettingsInjector.java"
        "src/com/android/settingslib/media/BluetoothMediaDevice.java"
        "src/com/android/settingslib/media/BluetoothMediaManager.java"
        "src/com/android/settingslib/media/ConnectionRecordManager.java"
        "src/com/android/settingslib/media/InfoMediaDevice.java"
        "src/com/android/settingslib/media/InfoMediaManager.java"
        "src/com/android/settingslib/media/LocalMediaManager.java"
        "src/com/android/settingslib/media/MediaDevice.java"
        "src/com/android/settingslib/media/MediaDeviceUtils.java"
        "src/com/android/settingslib/media/MediaManager.java"
        "src/com/android/settingslib/media/MediaOutputSliceConstants.java"
        "src/com/android/settingslib/media/PhoneMediaDevice.java"
        "src/com/android/settingslib/net/ChartData.java"
        "src/com/android/settingslib/net/ChartDataLoader.java"
        "src/com/android/settingslib/net/DataUsageController.java"
        "src/com/android/settingslib/net/DataUsageUtils.java"
        "src/com/android/settingslib/net/NetworkCycleChartData.java"
        "src/com/android/settingslib/net/NetworkCycleChartDataLoader.java"
        "src/com/android/settingslib/net/NetworkCycleData.java"
        "src/com/android/settingslib/net/NetworkCycleDataForUid.java"
        "src/com/android/settingslib/net/NetworkCycleDataForUidLoader.java"
        "src/com/android/settingslib/net/NetworkCycleDataLoader.java"
        "src/com/android/settingslib/net/NetworkStatsSummaryLoader.java"
        "src/com/android/settingslib/net/SignalStrengthUtil.java"
        "src/com/android/settingslib/net/SummaryForAllUidLoader.java"
        "src/com/android/settingslib/net/UidDetail.java"
        "src/com/android/settingslib/net/UidDetailProvider.java"
        "src/com/android/settingslib/notification/EnableZenModeDialog.java"
        "src/com/android/settingslib/notification/ZenDurationDialog.java"
        "src/com/android/settingslib/notification/ZenRadioLayout.java"
        "src/com/android/settingslib/suggestions/SuggestionController.java"
        "src/com/android/settingslib/suggestions/SuggestionControllerMixin.java"
        "src/com/android/settingslib/suggestions/SuggestionControllerMixinCompat.java"
        "src/com/android/settingslib/suggestions/SuggestionLoader.java"
        "src/com/android/settingslib/suggestions/SuggestionLoaderCompat.java"
        "src/com/android/settingslib/users/AppRestrictionsHelper.java"
        "src/com/android/settingslib/utils/AsyncLoader.java"
        "src/com/android/settingslib/utils/AsyncLoaderCompat.java"
        "src/com/android/settingslib/utils/IconCache.java"
        "src/com/android/settingslib/utils/PowerUtil.java"
        "src/com/android/settingslib/utils/StringUtil.java"
        "src/com/android/settingslib/utils/ThreadUtils.java"
        "src/com/android/settingslib/volume/D.java"
        "src/com/android/settingslib/volume/MediaSessions.java"
        "src/com/android/settingslib/volume/Util.java"
        "src/com/android/settingslib/widget/AnimatedImageView.java"
        "src/com/android/settingslib/widget/CandidateInfo.java"
        "src/com/android/settingslib/widget/FooterPreference.java"
        "src/com/android/settingslib/widget/FooterPreferenceMixin.java"
        "src/com/android/settingslib/widget/FooterPreferenceMixinCompat.java"
        "src/com/android/settingslib/widget/LinkTextView.java"
        "src/com/android/settingslib/wifi/AccessPoint.java"
        "src/com/android/settingslib/wifi/AccessPointPreference.java"
        "src/com/android/settingslib/wifi/TestAccessPointBuilder.java"
        "src/com/android/settingslib/wifi/TimestampedScoredNetwork.java"
        "src/com/android/settingslib/wifi/WifiSavedConfigUtils.java"
        "src/com/android/settingslib/wifi/WifiStatusTracker.java"
        "src/com/android/settingslib/wifi/WifiTracker.java"
        "src/com/android/settingslib/wifi/WifiTrackerFactory.java"
        "src/com/android/settingslib/wifi/WifiUtils.java"
        "src/com/android/settingslib/fuelgauge/Estimate.kt"
        "src/com/android/settingslib/graph/ThemedBatteryDrawable.kt"
    ];

    min_sdk_version = "21";

};

#  NOTE: Keep this module in sync with ./common.mk
SettingsLibDefaults = java_defaults {
    name = "SettingsLibDefaults";
    static_libs = [
        "androidx.annotation_annotation"
        "androidx.lifecycle_lifecycle-common"
        "androidx.legacy_legacy-support-v4"
        "androidx.lifecycle_lifecycle-runtime"
        "androidx.recyclerview_recyclerview"
        "androidx.preference_preference"
        "androidx.appcompat_appcompat"
        "androidx.legacy_legacy-preference-v14"
        "SettingsLib"
    ];
};

in { inherit SettingsLib SettingsLibDefaults; }
